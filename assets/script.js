const _0x274c65=_0x4867;(function(_0x393f7e,_0x3f4385){const _0x8aa9d4=_0x4867,_0x4dddab=_0x393f7e();while(!![]){try{const _0x249436=parseInt(_0x8aa9d4(0x86))/0x1+-parseInt(_0x8aa9d4(0xf6))/0x2+parseInt(_0x8aa9d4(0xc2))/0x3+-parseInt(_0x8aa9d4(0x9a))/0x4*(-parseInt(_0x8aa9d4(0xec))/0x5)+parseInt(_0x8aa9d4(0xd0))/0x6+-parseInt(_0x8aa9d4(0xbe))/0x7*(-parseInt(_0x8aa9d4(0xfd))/0x8)+parseInt(_0x8aa9d4(0xb8))/0x9*(-parseInt(_0x8aa9d4(0x79))/0xa);if(_0x249436===_0x3f4385)break;else _0x4dddab['push'](_0x4dddab['shift']());}catch(_0x47d84b){_0x4dddab['push'](_0x4dddab['shift']());}}}(_0x25a6,0x8afb5));const style=document[_0x274c65(0xab)](_0x274c65(0x84));style[_0x274c65(0xd9)]='html,\x0abody\x20{\x0a\x20\x20height:\x20100%;\x0a\x20\x20margin:\x200;\x0a\x20\x20display:\x20flex;\x0a\x20\x20justify-content:\x20center;\x0a\x20\x20align-items:\x20center;\x0a\x20\x20background:\x20linear-gradient(135deg,\x20#1e2a38,\x20#16202b);\x0a\x20\x20color:\x20#cfd8dc;\x0a\x20\x20font-family:\x20\x22Segoe\x20UI\x22,\x20Tahoma,\x20Geneva,\x20Verdana,\x20sans-serif;\x0a\x20\x20overflow:\x20hidden;\x0a}\x0a\x0a#ui\x20{\x0a\x20\x20position:\x20fixed;\x0a\x20\x20top:\x2050%;\x0a\x20\x20left:\x2050%;\x0a\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20width:\x20320px;\x0a\x20\x20padding:\x2015px\x2020px;\x0a\x20\x20border-radius:\x2012px;\x0a\x20\x20z-index:\x201000;\x0a\x20\x20backdrop-filter:\x20blur(8px);\x0a\x20\x20box-sizing:\x20border-box;\x0a\x20\x20max-height:\x2080vh;\x0a\x20\x20overflow-y:\x20scroll;\x0a\x0a\x20\x20scrollbar-width:\x20none;\x0a\x20\x20-ms-overflow-style:\x20none;\x0a}\x0a\x0a#ui::-webkit-scrollbar\x20{\x0a\x20\x20display:\x20none;\x0a}\x0a\x0a#ui\x20label\x20{\x0a\x20\x20font-weight:\x20600;\x0a\x20\x20font-size:\x2015px;\x0a\x20\x20display:\x20block;\x0a\x20\x20margin-bottom:\x206px;\x0a\x20\x20color:\x20#a8c0ff;\x0a}\x0a\x0a#ui\x20textarea\x20{\x0a\x20\x20width:\x2095%;\x0a\x20\x20height:\x2070px;\x0a\x20\x20margin-bottom:\x2012px;\x0a\x20\x20background:\x20#1b1b1b;\x0a\x20\x20border:\x201px\x20solid\x20#3d3d3d;\x0a\x20\x20color:\x20#ddd;\x0a\x20\x20font-size:\x2014px;\x0a\x20\x20resize:\x20vertical;\x0a\x20\x20padding:\x2010px\x2012px;\x0a\x20\x20border-radius:\x208px;\x0a\x20\x20font-family:\x20\x22Courier\x20New\x22,\x20Courier,\x20monospace;\x0a\x20\x20transition:\x20border-color\x200.3s\x20ease;\x0a}\x0a\x0a#ui\x20textarea:focus\x20{\x0a\x20\x20border-color:\x20#66aaff;\x0a\x20\x20outline:\x20none;\x0a\x20\x20background:\x20#222;\x0a}\x0a\x0a#musicSelector\x20{\x0a\x20\x20width:\x20100%;\x0a\x20\x20padding:\x2010px\x2014px;\x0a\x20\x20font-size:\x2015px;\x0a\x20\x20border-radius:\x2012px;\x0a\x20\x20border:\x20none;\x0a\x20\x20background:\x20#223344;\x0a\x20\x20color:\x20#e0e6f3;\x0a\x20\x20text-align-last:\x20center;\x0a\x20\x20text-align:\x20center;\x0a\x20\x20box-shadow:\x20inset\x200\x200\x2010px\x20rgba(0,\x200,\x200,\x200.6);\x0a\x20\x20margin-bottom:\x2015px;\x0a\x20\x20cursor:\x20pointer;\x0a\x20\x20transition:\x20background-color\x200.3s\x20ease;\x0a}\x0a\x0a#musicSelector:hover\x20{\x0a\x20\x20background-color:\x20#2a3b56;\x0a}\x0a\x0a#buttonContainer\x20{\x0a\x20\x20display:\x20flex;\x0a\x20\x20gap:\x2012px;\x0a}\x0a\x0a#startBtn,\x0a#qrBtn\x20{\x0a\x20\x20flex:\x201;\x0a\x20\x20padding:\x2012px\x200;\x0a\x20\x20background:\x20#4a90e2;\x0a\x20\x20border:\x20none;\x0a\x20\x20color:\x20white;\x0a\x20\x20font-weight:\x20700;\x0a\x20\x20font-size:\x2017px;\x0a\x20\x20cursor:\x20pointer;\x0a\x20\x20border-radius:\x2010px;\x0a\x20\x20box-shadow:\x200\x205px\x2015px\x20rgba(74,\x20144,\x20226,\x200.6);\x0a\x20\x20transition:\x20background-color\x200.3s\x20ease,\x20box-shadow\x200.3s\x20ease;\x0a}\x0a\x0a#startBtn:hover\x20{\x0a\x20\x20background:\x20#6aa0ff;\x0a\x20\x20box-shadow:\x200\x208px\x2025px\x20rgba(106,\x20160,\x20255,\x200.8);\x0a}\x0a\x0a#shareLink\x20{\x0a\x20\x20display:\x20inline-block;\x0a\x20\x20max-width:\x20250px;\x0a\x20\x20white-space:\x20nowrap;\x0a\x20\x20overflow:\x20hidden;\x0a\x20\x20text-overflow:\x20ellipsis;\x0a\x20\x20vertical-align:\x20bottom;\x0a\x20\x20color:\x20#42a5f5;\x0a\x20\x20cursor:\x20pointer;\x0a\x20\x20text-decoration:\x20underline;\x0a\x20\x20font-size:\x2015px;\x0a\x20\x20user-select:\x20all;\x0a\x20\x20margin-top:\x2010px;\x0a\x20\x20text-align:\x20center;\x0a}\x0a\x0a.heart-frame\x20{\x0a\x20\x20position:\x20relative;\x0a\x20\x20width:\x20320px;\x0a\x20\x20height:\x20296px;\x0a\x20\x20margin:\x2020px\x20auto;\x0a}\x0a\x0a#finalCanvas\x20{\x0a\x20\x20cursor:\x20pointer;\x0a\x20\x20display:\x20block;\x0a\x20\x20margin:\x200\x20auto;\x0a\x20\x20border-radius:\x2012px;\x0a\x20\x20box-shadow:\x200\x200\x208px\x20rgba(0,\x200,\x200,\x200.1);\x0a}\x0a\x0a.info-text\x20{\x0a\x20\x20text-align:\x20center;\x0a\x20\x20color:\x20#ff679a;\x0a\x20\x20font-size:\x2012px;\x0a\x20\x20margin-top:\x205px;\x0a}\x0a\x0atextarea\x20{\x0a\x20\x20\x20\x20width:\x20300px;\x0a\x20\x20\x20\x20height:\x20150px;\x0a\x20\x20\x20\x20padding:\x2010px;\x0a\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20border:\x201px\x20solid\x20#cccccc00;\x0a\x20\x20\x20\x20border-radius:\x205px;\x0a\x20\x20\x20\x20resize:\x20both;\x0a}\x0a\x0atextarea::-webkit-scrollbar\x20{\x0a\x20\x20\x20\x20width:\x2010px;\x0a\x20\x20\x20\x20height:\x2010px;\x0a}\x0a\x0atextarea::-webkit-scrollbar-thumb\x20{\x0a\x20\x20\x20\x20background-color:\x20#888;\x0a\x20\x20\x20\x20border-radius:\x205px;\x0a\x20\x20\x20\x20border:\x202px\x20solid\x20#ffffff00;\x0a}\x0a\x0atextarea::-webkit-scrollbar-thumb:hover\x20{\x0a\x20\x20\x20\x20background-color:\x20#555;\x0a}\x0a\x0atextarea::-webkit-scrollbar-track\x20{\x0a\x20\x20\x20\x20background-color:\x20#f1f1f100;\x0a\x20\x20\x20\x20border-radius:\x205px;\x0a}\x0a',document[_0x274c65(0xf3)][_0x274c65(0x107)](style),document[_0x274c65(0x7b)](_0x274c65(0x9e))['placeholder']='Ví\x20dụ:\x20\x0ahttps://panbap/image1.png\x0ahttps://panbap/image2.png\x0aNhập\x201\x20chữ\x20bất\x20kỳ\x20để\x20bỏ\x20qua\x20ảnh';const encodeData=_0x18ac48=>btoa(encodeURIComponent(_0x18ac48)[_0x274c65(0xb7)](/%(\w{2})/g,(_0x5e782b,_0x1eb08f)=>String[_0x274c65(0x91)]('0x'+_0x1eb08f)))[_0x274c65(0xb7)](/[+/=]/g,_0x1f5697=>({'+':'-','/':'_','=':''}[_0x1f5697]||'')),decodeData=_0x450eea=>{const _0x360cbf=_0x274c65;for(_0x450eea=_0x450eea['replace'](/[-_]/g,_0x10521b=>({'-':'+','_':'/'}[_0x10521b]));_0x450eea['length']%0x4;)_0x450eea+='=';return decodeURIComponent(atob(_0x450eea)[_0x360cbf(0x124)]('')[_0x360cbf(0x11d)](_0x21ee60=>'%'+_0x21ee60[_0x360cbf(0x95)](0x0)[_0x360cbf(0xbb)](0x10)[_0x360cbf(0x96)](0x2,'0'))[_0x360cbf(0x92)](''));};function getDataFromURL(){const _0x3f4bf1=_0x274c65;if(location['hash'][_0x3f4bf1(0x11e)]('#id=')){const _0x270ff3=location[_0x3f4bf1(0x90)]['slice'](0x4),_0x5a2b37=decodeData(_0x270ff3);if(_0x5a2b37)try{return JSON[_0x3f4bf1(0x111)](_0x5a2b37);}catch(_0x301025){return console[_0x3f4bf1(0x93)](_0x3f4bf1(0xe3),_0x301025),null;}}return null;}const inputTextEl=document[_0x274c65(0x7b)](_0x274c65(0x7f)),imageLinksEl=document['getElementById'](_0x274c65(0x9e)),startBtn=document[_0x274c65(0x7b)](_0x274c65(0xb6)),shareLinkEl=document[_0x274c65(0x7b)](_0x274c65(0xa2)),qrBtn=document['getElementById']('qrBtn'),heartFrame=document[_0x274c65(0xd7)](_0x274c65(0xe8)),canvas=document[_0x274c65(0x7b)]('finalCanvas'),ctx=canvas['getContext']('2d'),musicSelector=document[_0x274c65(0x7b)](_0x274c65(0xb3));let audio=null;function waitUserToStartMusic(_0x1e6da2){const _0x3b0eac=_0x274c65,_0x18fbe8=()=>{const _0x55ead4=_0x4867;playMusic(_0x1e6da2),document[_0x55ead4(0x105)](_0x55ead4(0x8a),_0x18fbe8),document[_0x55ead4(0x105)]('touchstart',_0x18fbe8);};document[_0x3b0eac(0xe4)]('click',_0x18fbe8),document['addEventListener']('touchstart',_0x18fbe8);}function playMusic(_0x1073ad){const _0x276879=_0x274c65;audio&&(audio['pause'](),audio=null),_0x1073ad&&(audio=new Audio(_0x1073ad),audio[_0x276879(0x122)]=!0x0,audio[_0x276879(0xc6)]=0.5,audio[_0x276879(0x7c)]()['catch'](_0x7ff885=>{const _0x2e7617=_0x276879;console[_0x2e7617(0x87)](_0x2e7617(0xbd),_0x7ff885);}));}function _0x25a6(){const _0x1c49fd=['#cfd8dc','delayOffset','setSize','/Textlove/index.html','musicSelector','geometry','setPixelRatio','startBtn','replace','9moERXU','needsUpdate','removeChild','toString','replaceState','Không\x20thể\x20phát\x20nhạc\x20tự\x20động:','36813JbzWlD','getContext','Line','fillStyle','1216431azbgmZ','userData','speed','#ffffff','volume','lookAt','scale','strokeText','acos','display','copy','render','inline','change','2707278WiTLqn','LineBasicMaterial','textBaseline','domElement','clientX','none','toBlob','querySelector','#63c7c7','innerHTML','textAlign','positions','Không\x20có\x20music\x20trong\x20data','fillText','BufferAttribute','title','dispose','normalize','log','JSON\x20parse\x20error:','addEventListener','drawImage','PlaneGeometry','push','.heart-frame','clear','trim','touches','2216025Yyopyt','createObjectURL','clientY','Vui\x20lòng\x20nhập\x20ít\x20nhất\x20một\x20câu!','set','position','devicePixelRatio','head','MathUtils','music','1145360HBKmJF','PointsMaterial','PerspectiveCamera','image/png','location','lerpVectors','Color','744rWYhHe','origin','randFloat','#id=','innerHeight','textLines','focus','onerror','removeEventListener','filter','appendChild','innerWidth','middle','stringify','delete','TextureLoader','multiplyScalar','cos','LinearFilter','touchmove','parse','SpriteMaterial','width','minFilter','Mesh','#76b776','donateQR','clone','Click\x20để\x20mở\x20link\x20trong\x20tab\x20mới','id=','Points','sin','map','startsWith','canvas','forEach','value','loop','body','split','setAttribute','Float32BufferAttribute','aspect','visible','history','block','Scene','downloadPreview','12092630fuqZfK','remove','getElementById','play','Nhạc\x20từ\x20URL:','Vector3','inputText','progress','mousemove','material','add','style','load','562230YGMaOq','warn','#ff8690','randFloatSpread','click','MeshBasicMaterial','resize','pos','strokeStyle','Chưa\x20có\x20link\x20để\x20tạo\x20QR!\x20Vui\x20lòng\x20tạo\x20link\x20trước.','hash','fromCharCode','join','error','updateProjectionMatrix','charCodeAt','padStart','length','line','bold\x2072px\x20MyFont','4THGmij','CanvasTexture','href','velocity','imageLinks','floor','clearRect','BufferGeometry','shareLink','Group','Vui\x20lòng\x20nhập\x20ít\x20nhất\x20một\x20link\x20ảnh!','then','height','textContent','attributes','fonts','src','createElement','inline-block','48px\x20MyFont','random'];_0x25a6=function(){return _0x1c49fd;};return _0x25a6();}function updateURLParam(_0x35efcc,_0xec94f8){const _0xc5d991=_0x274c65,_0x57965f=new URL(window[_0xc5d991(0xfa)]);_0xec94f8?_0x57965f['searchParams'][_0xc5d991(0xf0)](_0x35efcc,_0xec94f8):_0x57965f['searchParams'][_0xc5d991(0x10b)](_0x35efcc),window[_0xc5d991(0x129)][_0xc5d991(0xbc)]({},'',_0x57965f);}musicSelector['addEventListener'](_0x274c65(0xcf),()=>{const _0x4c286e=_0x274c65,_0xf2ccc2=musicSelector[_0x4c286e(0x121)];updateURLParam(_0x4c286e(0xf5),_0xf2ccc2),playMusic(_0xf2ccc2);}),window[_0x274c65(0xe4)](_0x274c65(0x85),()=>{const _0x3d47ed=_0x274c65,_0x1691ae=getDataFromURL();_0x1691ae&&_0x1691ae[_0x3d47ed(0xf5)]&&(musicSelector[_0x3d47ed(0x121)]=_0x1691ae['music'],waitUserToStartMusic(_0x1691ae['music']));});let images=[],textLines=[];const scene=new THREE[(_0x274c65(0x12b))](),camera=new THREE[(_0x274c65(0xf8))](0x4b,window[_0x274c65(0x108)]/window[_0x274c65(0x101)],0.1,0xbb8);camera[_0x274c65(0xf1)]['z']=0x190;const renderer=new THREE['WebGLRenderer']({'antialias':!0x0,'alpha':!0x0});renderer[_0x274c65(0xb5)](window[_0x274c65(0xf2)]),renderer['setSize'](window[_0x274c65(0x108)],window[_0x274c65(0x101)]),document[_0x274c65(0x123)][_0x274c65(0x107)](renderer[_0x274c65(0xd3)]);const starGeo=new THREE[(_0x274c65(0xa1))](),starCount=0x320,starPos=[];for(let e=0x0;e<0x320;e++){const e=THREE[_0x274c65(0xf4)][_0x274c65(0xff)](0x384,0x4b0),t=Math[_0x274c65(0xca)](THREE[_0x274c65(0xf4)][_0x274c65(0x89)](0x2)),n=THREE['MathUtils'][_0x274c65(0x89)](0x2*Math['PI']);starPos[_0x274c65(0xe7)](e*Math[_0x274c65(0x11c)](t)*Math[_0x274c65(0x10e)](n),e*Math[_0x274c65(0x11c)](t)*Math['sin'](n),e*Math[_0x274c65(0x10e)](t));}starGeo[_0x274c65(0x125)](_0x274c65(0xf1),new THREE[(_0x274c65(0x126))](starPos,0x3));const starsMat=new THREE[(_0x274c65(0xf7))]({'color':0xffffff,'size':0x5,'transparent':!0x0,'opacity':0.9});scene[_0x274c65(0x83)](new THREE[(_0x274c65(0x11b))](starGeo,starsMat));const starPositions=[];for(let e=0x0;e<0x320;e++)starPositions['push'](new THREE[(_0x274c65(0x7e))](starPos[0x3*e],starPos[0x3*e+0x1],starPos[0x3*e+0x2]));const shootingStars=[],shootingStarCount=0x5;for(let e=0x0;e<0x5;e++){const e=new THREE['BufferGeometry'](),t=new Float32Array(0x1e);e['setAttribute'](_0x274c65(0xf1),new THREE[(_0x274c65(0xde))](t,0x3));const n=new THREE['LineBasicMaterial']({'color':0xffffff,'transparent':!0x0,'opacity':0.9}),o=new THREE[(_0x274c65(0xc0))](e,n),a=new THREE[(_0x274c65(0x7e))](THREE[_0x274c65(0xf4)][_0x274c65(0x89)](0x3e8),THREE['MathUtils'][_0x274c65(0xff)](0x190,0x2bc),THREE[_0x274c65(0xf4)]['randFloatSpread'](0x3e8)),i=new THREE[(_0x274c65(0x7e))](0.8,-0x1,0.2)[_0x274c65(0xe1)]()[_0x274c65(0x10d)](0x5+0x5*Math[_0x274c65(0xae)]());shootingStars[_0x274c65(0xe7)]({'line':o,'positions':t,'pos':a,'velocity':i}),scene[_0x274c65(0x83)](o);}const shootingStarsFromStars=[],shootingStarCountFromStars=0x1e;for(let e=0x0;e<0x1e;e++){const e=new THREE[(_0x274c65(0xa1))](),t=new Float32Array(0x1e);e[_0x274c65(0x125)]('position',new THREE[(_0x274c65(0xde))](t,0x3));const n=new THREE[(_0x274c65(0xd1))]({'color':0xffffff,'transparent':!0x0,'opacity':0.9}),o=new THREE[(_0x274c65(0xc0))](e,n),a=Math[_0x274c65(0x9f)](Math[_0x274c65(0xae)]()*starPositions[_0x274c65(0x97)]),i=starPositions[a]['clone'](),r=i[_0x274c65(0x118)]()['normalize']()[_0x274c65(0x118)]()[_0x274c65(0x83)](new THREE[(_0x274c65(0x7e))](THREE[_0x274c65(0xf4)]['randFloatSpread'](0.5),THREE[_0x274c65(0xf4)][_0x274c65(0x89)](0.5),THREE[_0x274c65(0xf4)][_0x274c65(0x89)](0.5)))[_0x274c65(0xe1)]()[_0x274c65(0x10d)](0x5+0x5*Math[_0x274c65(0xae)]());shootingStarsFromStars[_0x274c65(0xe7)]({'line':o,'positions':t,'pos':i,'velocity':r}),scene['add'](o);}images=[];const textureLoader=new THREE[(_0x274c65(0x10c))](),group=new THREE[(_0x274c65(0xa3))]();function randomPosOnSphere(_0x36e8f1){const _0xb70e67=_0x274c65,_0x3a35d=Math[_0xb70e67(0xca)](THREE['MathUtils'][_0xb70e67(0x89)](0x2)),_0x5f2445=THREE[_0xb70e67(0xf4)][_0xb70e67(0x89)](0x2*Math['PI']);return new THREE[(_0xb70e67(0x7e))](_0x36e8f1*Math[_0xb70e67(0x11c)](_0x3a35d)*Math[_0xb70e67(0x10e)](_0x5f2445),_0x36e8f1*Math[_0xb70e67(0x11c)](_0x3a35d)*Math[_0xb70e67(0x11c)](_0x5f2445),_0x36e8f1*Math[_0xb70e67(0x10e)](_0x3a35d));}function createTextSprite(_0x5bcc22){const _0x7275bc=_0x274c65,_0x20bed9=document[_0x7275bc(0xab)]('canvas');_0x20bed9[_0x7275bc(0x113)]=0x200,_0x20bed9[_0x7275bc(0xa6)]=0x80;const _0x3388a8=_0x20bed9[_0x7275bc(0xbf)]('2d'),_0xbb472d=[_0x7275bc(0x88),_0x7275bc(0x116),_0x7275bc(0xd8)],_0x58b4f5=[_0x7275bc(0xaf),'#cfd8dc','#cfd8dc'];let _0x4d7c49=0x0;const _0x61e2bd=new THREE[(_0x7275bc(0x9b))](_0x20bed9);_0x61e2bd[_0x7275bc(0x114)]=THREE[_0x7275bc(0x10f)];const _0x2ad1e8=new THREE[(_0x7275bc(0x112))]({'map':_0x61e2bd,'transparent':!0x0,'emissive':new THREE[(_0x7275bc(0xfc))](0xbfe6ff),'emissiveIntensity':1.5}),_0x2ebe7f=new THREE['Sprite'](_0x2ad1e8);function _0x20b66e(){const _0x5cf39c=_0x7275bc;_0x3388a8['clearRect'](0x0,0x0,_0x20bed9[_0x5cf39c(0x113)],_0x20bed9['height']),_0x3388a8['font']=_0x5cf39c(0x99),_0x3388a8[_0x5cf39c(0xda)]='center',_0x3388a8[_0x5cf39c(0xd2)]=_0x5cf39c(0x109),_0x3388a8[_0x5cf39c(0xc1)]=_0xbb472d[_0x4d7c49],_0x3388a8['lineWidth']=0x2,_0x3388a8[_0x5cf39c(0x8e)]=_0x58b4f5[_0x4d7c49],_0x3388a8[_0x5cf39c(0xc9)](_0x5bcc22,0x100,0x40),_0x3388a8[_0x5cf39c(0xdd)](_0x5bcc22,0x100,0x40),_0x61e2bd[_0x5cf39c(0xb9)]=!0x0;}return _0x2ebe7f[_0x7275bc(0xc8)]['set'](0x96,0x28,0x1),_0x20b66e(),setInterval(()=>{const _0xf36476=_0x7275bc;_0x4d7c49=(_0x4d7c49+0x1)%_0xbb472d[_0xf36476(0x97)],_0x20b66e();},0x2710),document[_0x7275bc(0xa9)]['load'](_0x7275bc(0xad))[_0x7275bc(0xa5)](()=>{_0x20b66e();}),_0x2ebe7f;}scene[_0x274c65(0x83)](group);const planes=[],labels=[],imagePositions=[],textPositions=[],boxCount=0x32,radiusImage=0x190,radiusText=0x258;function initScene(){const _0x2f9300=_0x274c65;if(group[_0x2f9300(0xe9)](),planes[_0x2f9300(0x97)]=0x0,labels[_0x2f9300(0x97)]=0x0,imagePositions[_0x2f9300(0x97)]=0x0,textPositions[_0x2f9300(0x97)]=0x0,0x0!==images[_0x2f9300(0x97)]&&0x0!==textLines[_0x2f9300(0x97)]){for(let _0xb3f193=0x0;_0xb3f193<boxCount;_0xb3f193++){const _0x13c0d5=0x14+0xa*Math[_0x2f9300(0xae)](),_0x25a8d5=new THREE[(_0x2f9300(0xe6))](_0x13c0d5,_0x13c0d5),_0x413711=textureLoader['load'](images[_0xb3f193%images['length']],_0x16068d=>{const _0x8a24a9=_0x2f9300;_0x16068d[_0x8a24a9(0x114)]=THREE['LinearMipMapLinearFilter'],_0x16068d['magFilter']=THREE[_0x8a24a9(0x10f)],_0x16068d['anisotropy']=renderer['capabilities']['getMaxAnisotropy']();}),_0x388429=new THREE[(_0x2f9300(0x8b))]({'map':_0x413711,'transparent':!0x0}),_0x23c23d=new THREE[(_0x2f9300(0x115))](_0x25a8d5,_0x388429),_0x1f6223=randomPosOnSphere(radiusImage);imagePositions['push'](_0x1f6223),_0x23c23d[_0x2f9300(0xf1)][_0x2f9300(0xf0)](0x0,0x0,0x0),_0x23c23d[_0x2f9300(0xc8)][_0x2f9300(0xf0)](0.05,0.05,0.05),_0x23c23d['userData']={'progress':0x0,'speed':0.0005+0.001*Math['random'](),'delayOffset':0.02*_0xb3f193},group[_0x2f9300(0x83)](_0x23c23d),planes['push'](_0x23c23d);}for(let _0x18e26f=0x0;_0x18e26f<0x2*boxCount;_0x18e26f++){const _0x3bd6d0=createTextSprite(textLines[_0x18e26f%textLines[_0x2f9300(0x97)]]),_0x187619=randomPosOnSphere(radiusText);textPositions[_0x2f9300(0xe7)](_0x187619),_0x3bd6d0['position'][_0x2f9300(0xf0)](0x0,0x0,0x0),_0x3bd6d0[_0x2f9300(0xc8)][_0x2f9300(0xf0)](1.5,0.4,0x1),_0x3bd6d0[_0x2f9300(0xc3)]={'progress':0x0,'speed':0.0005+0.001*Math[_0x2f9300(0xae)](),'delayOffset':0.02*_0x18e26f},scene[_0x2f9300(0x83)](_0x3bd6d0),labels[_0x2f9300(0xe7)](_0x3bd6d0);}}}function updateLabelText(_0x39d05d,_0x15e635){const _0x126f45=_0x274c65;if(_0x39d05d<0x0||_0x39d05d>=labels['length'])return;const _0x419e4f=labels[_0x39d05d];if(_0x419e4f&&(scene[_0x126f45(0x7a)](_0x419e4f),_0x419e4f['material'][_0x126f45(0x11d)]['dispose'](),_0x419e4f[_0x126f45(0x82)][_0x126f45(0xe0)]()),''===_0x15e635[_0x126f45(0xea)]())return void(labels[_0x39d05d]=null);const _0x17181d=createTextSprite(_0x15e635);_0x17181d[_0x126f45(0xf1)]['copy'](textPositions[_0x39d05d]),scene['add'](_0x17181d),labels[_0x39d05d]=_0x17181d;}initScene();let targetRotX=0x0,targetRotY=0x0,currentRotX=0x0,currentRotY=0x0;const maxRotX=Math['PI']/0xb4*0x5a,maxRotY=0x2*Math['PI'];function updateTargetRotation(_0x14b5c1,_0x4dfc62){const _0x535d09=_0x274c65,_0x587165=_0x14b5c1/window[_0x535d09(0x108)]*0x2-0x1,_0xa87e55=_0x4dfc62/window['innerHeight']*0x2-0x1;targetRotY=_0x587165*maxRotY,targetRotX=_0xa87e55*maxRotX;}function updateShareLink(_0x3578bf,_0x3b17ba,_0x196778){const _0x27a72c=_0x274c65,_0x3317f0={'textLines':_0x3578bf,'imageLinks':_0x3b17ba,'music':_0x196778},_0xaa9c8=JSON[_0x27a72c(0x10a)](_0x3317f0),_0x430c0c=encodeData(_0xaa9c8),_0x312d6f=new URL(location['origin']+_0x27a72c(0xb2));_0x312d6f[_0x27a72c(0x90)]=_0x27a72c(0x11a)+_0x430c0c,shareLinkEl[_0x27a72c(0xa7)]=_0x312d6f[_0x27a72c(0xbb)](),shareLinkEl[_0x27a72c(0x9c)]=_0x312d6f['toString'](),shareLinkEl[_0x27a72c(0xdf)]=_0x27a72c(0x119),shareLinkEl[_0x27a72c(0x84)][_0x27a72c(0xcb)]='inline-block';}function loadFromURL(){const _0x107b9b=_0x274c65,_0x14c543=getDataFromURL();if(!_0x14c543)return!0x1;_0x14c543[_0x107b9b(0x102)]&&(textLines=_0x14c543[_0x107b9b(0x102)],inputTextEl[_0x107b9b(0x121)]=textLines[_0x107b9b(0x92)]('\x0a')),_0x14c543[_0x107b9b(0x9e)]&&(images=_0x14c543['imageLinks'],imageLinksEl['value']=images[_0x107b9b(0x92)]('\x0a')),_0x14c543[_0x107b9b(0xf5)]?(console[_0x107b9b(0xe2)](_0x107b9b(0x7d),_0x14c543[_0x107b9b(0xf5)]),musicSelector[_0x107b9b(0x121)]=_0x14c543['music'],playMusic(_0x14c543[_0x107b9b(0xf5)])):console['log'](_0x107b9b(0xdc)),initScene();for(let _0x3763b0=0x0;_0x3763b0<0x2*planes[_0x107b9b(0x97)];_0x3763b0++){let _0x1b6f93='';textLines[_0x107b9b(0x97)]>0x0&&(_0x1b6f93=textLines[_0x3763b0%textLines[_0x107b9b(0x97)]]),updateLabelText(_0x3763b0,_0x1b6f93);}return updateShareLink(textLines,images,_0x14c543[_0x107b9b(0xf5)]),!0x0;}function animate(){const _0x23339a=_0x274c65;requestAnimationFrame(animate),currentRotX+=0.005*(targetRotX-currentRotX),currentRotY+=0.005*(targetRotY-currentRotY),(camera[_0x23339a(0xf1)]['x']=0x258*Math[_0x23339a(0x11c)](currentRotY)*Math[_0x23339a(0x10e)](currentRotX),camera[_0x23339a(0xf1)]['y']=0x258*Math[_0x23339a(0x11c)](currentRotX),camera[_0x23339a(0xf1)]['z']=0x258*Math[_0x23339a(0x10e)](currentRotY)*Math[_0x23339a(0x10e)](currentRotX),camera[_0x23339a(0xc7)](0x0,0x0,0x0));const _0x4aa706=0x3e8;planes[_0x23339a(0x120)](_0x13fdc9=>{const _0x1d5ea2=_0x23339a;_0x13fdc9[_0x1d5ea2(0xc7)](camera[_0x1d5ea2(0xf1)]);}),planes[_0x23339a(0x120)]((_0x13fdb5,_0x3f73a2)=>{const _0xd3c742=_0x23339a;let _0x29d5c6=_0x13fdb5[_0xd3c742(0xc3)][_0xd3c742(0x80)]-_0x13fdb5[_0xd3c742(0xc3)][_0xd3c742(0xb0)];_0x29d5c6<0x0?_0x29d5c6=0x0:_0x29d5c6>0x1&&(_0x29d5c6=0x1);const _0x2dea67=imagePositions[_0x3f73a2]['clone']();_0x2dea67['y']-=0x190;const _0xa7d3bd=new THREE['Vector3'](_0x2dea67['x'],_0x4aa706,_0x2dea67['z']);_0x13fdb5['position'][_0xd3c742(0xfb)](_0xa7d3bd,_0x2dea67,_0x29d5c6);let _0x16dad8=0.05+1.95*_0x29d5c6;_0x13fdb5['scale'][_0xd3c742(0xf0)](_0x16dad8,_0x16dad8,_0x16dad8),_0x13fdb5['up']['set'](0x0,0x1,0x0),_0x13fdb5['lookAt'](camera[_0xd3c742(0xf1)]),_0x13fdb5[_0xd3c742(0xc3)][_0xd3c742(0x80)]+=_0x13fdb5['userData'][_0xd3c742(0xc4)],_0x13fdb5[_0xd3c742(0xc3)][_0xd3c742(0x80)]>0x1+_0x13fdb5[_0xd3c742(0xc3)][_0xd3c742(0xb0)]&&(_0x13fdb5[_0xd3c742(0xc3)][_0xd3c742(0x80)]=0x0);const _0x5a63b7=labels[0x2*_0x3f73a2];if(_0x5a63b7){_0x5a63b7[_0xd3c742(0x128)]=_0x29d5c6>0.05;const _0x1cd57c=textPositions[0x2*_0x3f73a2]['clone']();_0x1cd57c['y']-=0x190;const _0x1df83e=new THREE[(_0xd3c742(0x7e))](_0x1cd57c['x'],_0x4aa706,_0x1cd57c['z']);_0x5a63b7[_0xd3c742(0xf1)]['lerpVectors'](_0x1df83e,_0x1cd57c,_0x29d5c6);}const _0xe59b5d=labels[0x2*_0x3f73a2+0x1];if(_0xe59b5d){_0xe59b5d[_0xd3c742(0x128)]=_0x29d5c6>0.05;const _0x3ebc06=textPositions[0x2*_0x3f73a2+0x1][_0xd3c742(0x118)]();_0x3ebc06['y']-=0x190;const _0x165216=new THREE[(_0xd3c742(0x7e))](_0x3ebc06['x'],_0x4aa706,_0x3ebc06['z']);_0xe59b5d[_0xd3c742(0xf1)][_0xd3c742(0xfb)](_0x165216,_0x3ebc06,_0x29d5c6);}}),shootingStars['forEach'](_0x3154b6=>{const _0xf08538=_0x23339a;_0x3154b6[_0xf08538(0x8d)]['add'](_0x3154b6[_0xf08538(0x9d)]);for(let _0x25cf3d=0x0;_0x25cf3d<0xa;_0x25cf3d++){const _0x5b0179=0x3*_0x25cf3d;_0x3154b6[_0xf08538(0xdb)][_0x5b0179]=_0x3154b6[_0xf08538(0x8d)]['x']-_0x3154b6[_0xf08538(0x9d)]['x']*_0x25cf3d*0.8,_0x3154b6[_0xf08538(0xdb)][_0x5b0179+0x1]=_0x3154b6[_0xf08538(0x8d)]['y']-_0x3154b6[_0xf08538(0x9d)]['y']*_0x25cf3d*0.8,_0x3154b6[_0xf08538(0xdb)][_0x5b0179+0x2]=_0x3154b6['pos']['z']-_0x3154b6[_0xf08538(0x9d)]['z']*_0x25cf3d*0.8;}_0x3154b6[_0xf08538(0x98)][_0xf08538(0xb4)][_0xf08538(0xa8)]['position'][_0xf08538(0xb9)]=!0x0,_0x3154b6[_0xf08538(0x8d)]['y']<-0x1f4&&_0x3154b6[_0xf08538(0x8d)][_0xf08538(0xf0)](THREE[_0xf08538(0xf4)]['randFloatSpread'](0x3e8),THREE[_0xf08538(0xf4)][_0xf08538(0xff)](0x190,0x2bc),THREE['MathUtils'][_0xf08538(0x89)](0x3e8));}),shootingStarsFromStars['forEach'](_0x4cf22a=>{const _0x17f3d9=_0x23339a;_0x4cf22a['pos']['add'](_0x4cf22a[_0x17f3d9(0x9d)]);for(let _0x31fe3c=0x0;_0x31fe3c<0xa;_0x31fe3c++){const _0x52b232=0x3*_0x31fe3c;_0x4cf22a[_0x17f3d9(0xdb)][_0x52b232]=_0x4cf22a[_0x17f3d9(0x8d)]['x']-_0x4cf22a[_0x17f3d9(0x9d)]['x']*_0x31fe3c*0.5,_0x4cf22a[_0x17f3d9(0xdb)][_0x52b232+0x1]=_0x4cf22a[_0x17f3d9(0x8d)]['y']-_0x4cf22a['velocity']['y']*_0x31fe3c*0.5,_0x4cf22a[_0x17f3d9(0xdb)][_0x52b232+0x2]=_0x4cf22a['pos']['z']-_0x4cf22a[_0x17f3d9(0x9d)]['z']*_0x31fe3c*0.5;}if(_0x4cf22a[_0x17f3d9(0x98)][_0x17f3d9(0xb4)]['attributes'][_0x17f3d9(0xf1)][_0x17f3d9(0xb9)]=!0x0,_0x4cf22a['pos'][_0x17f3d9(0x97)]()>0x514){const _0x14d60f=Math[_0x17f3d9(0x9f)](Math[_0x17f3d9(0xae)]()*starPositions[_0x17f3d9(0x97)]);_0x4cf22a[_0x17f3d9(0x8d)][_0x17f3d9(0xcc)](starPositions[_0x14d60f]);const _0x494858=_0x4cf22a['pos'][_0x17f3d9(0x118)]()['normalize']();_0x4cf22a[_0x17f3d9(0x9d)]['copy'](_0x494858['add'](new THREE[(_0x17f3d9(0x7e))](THREE['MathUtils'][_0x17f3d9(0x89)](0.5),THREE['MathUtils'][_0x17f3d9(0x89)](0.5),THREE[_0x17f3d9(0xf4)]['randFloatSpread'](0.5)))[_0x17f3d9(0xe1)]()[_0x17f3d9(0x10d)](0x5+0x5*Math[_0x17f3d9(0xae)]()));}}),renderer[_0x23339a(0xcd)](scene,camera);}window[_0x274c65(0xe4)](_0x274c65(0x81),_0x38661d=>{const _0x1633e9=_0x274c65;updateTargetRotation(_0x38661d[_0x1633e9(0xd4)],_0x38661d[_0x1633e9(0xee)]);}),window[_0x274c65(0xe4)](_0x274c65(0x110),_0x3a087c=>{const _0x2a1336=_0x274c65;if(_0x3a087c[_0x2a1336(0xeb)]['length']>0x0){const _0x137dde=_0x3a087c[_0x2a1336(0xeb)][0x0];updateTargetRotation(_0x137dde[_0x2a1336(0xd4)],_0x137dde[_0x2a1336(0xee)]);}},{'passive':!0x0}),startBtn[_0x274c65(0xe4)](_0x274c65(0x8a),()=>{const _0xc8d0cd=_0x274c65,_0x28a9f2=inputTextEl[_0xc8d0cd(0x121)]['trim'](),_0x4a1cf7=imageLinksEl[_0xc8d0cd(0x121)][_0xc8d0cd(0xea)](),_0x535940=musicSelector[_0xc8d0cd(0x121)];if(''===_0x28a9f2)return alert(_0xc8d0cd(0xef)),void _0x28a9f2[_0xc8d0cd(0x103)]();if(''===_0x4a1cf7)return alert(_0xc8d0cd(0xa4)),void imageLinksEl[_0xc8d0cd(0x103)]();textLines=_0x28a9f2[_0xc8d0cd(0x97)]?_0x28a9f2[_0xc8d0cd(0x124)]('\x0a')['filter'](_0x1ad6e3=>''!==_0x1ad6e3[_0xc8d0cd(0xea)]()):[],images=_0x4a1cf7[_0xc8d0cd(0x97)]?_0x4a1cf7[_0xc8d0cd(0x124)]('\x0a')[_0xc8d0cd(0x106)](_0x1c9c3f=>''!==_0x1c9c3f[_0xc8d0cd(0xea)]()):[],initScene();for(let _0x21d6de=0x0;_0x21d6de<planes['length'];_0x21d6de++){let _0x141c91='';textLines[_0xc8d0cd(0x97)]>0x0&&(_0x141c91=textLines[_0x21d6de%textLines[_0xc8d0cd(0x97)]]),updateLabelText(_0x21d6de,_0x141c91);}!audio&&musicSelector[_0xc8d0cd(0x121)]&&playMusic(musicSelector['value']);const _0x3a6cf5={'textLines':textLines,'imageLinks':images,'music':_0x535940},_0x5b96e8=JSON[_0xc8d0cd(0x10a)](_0x3a6cf5),_0x2cf872=encodeData(_0x5b96e8),_0x52899b=new URL(location['origin']+'/Textlove/index.html');_0x52899b[_0xc8d0cd(0x90)]=_0xc8d0cd(0x11a)+_0x2cf872,shareLinkEl[_0xc8d0cd(0x84)]['display']='none',document[_0xc8d0cd(0x7b)]('donateQR')[_0xc8d0cd(0x84)][_0xc8d0cd(0xcb)]=_0xc8d0cd(0x12a),setTimeout(()=>{const _0x590b40=_0xc8d0cd;shareLinkEl[_0x590b40(0xa7)]=_0x52899b[_0x590b40(0xbb)](),shareLinkEl[_0x590b40(0x9c)]=_0x52899b[_0x590b40(0xbb)](),shareLinkEl['title']='Click\x20để\x20mở\x20link\x20trong\x20tab\x20mới',shareLinkEl['style'][_0x590b40(0xcb)]=_0x590b40(0xac),document[_0x590b40(0x7b)](_0x590b40(0x117))[_0x590b40(0x84)][_0x590b40(0xcb)]=_0x590b40(0xd5);},0xbb8);}),animate(),loadFromURL()?document['getElementById']('ui')[_0x274c65(0x84)][_0x274c65(0xcb)]=_0x274c65(0xd5):shareLinkEl[_0x274c65(0x84)][_0x274c65(0xcb)]=_0x274c65(0xd5),window['addEventListener'](_0x274c65(0x8c),()=>{const _0x3244a7=_0x274c65;camera[_0x3244a7(0x127)]=window['innerWidth']/window[_0x3244a7(0x101)],camera[_0x3244a7(0x94)](),renderer[_0x3244a7(0xb1)](window[_0x3244a7(0x108)],window[_0x3244a7(0x101)]);}),document[_0x274c65(0x7b)](_0x274c65(0xb6))['addEventListener'](_0x274c65(0x8a),()=>{const _0x36e6d6=_0x274c65,_0x3fd8ec=_0xadd2fa,_0xadd2fa=window['location'][_0x36e6d6(0xfe)]+window[_0x36e6d6(0xfa)]['pathname']+_0x36e6d6(0x100)+encodeURIComponent(_0x3fd8ec),_0x19c834=document[_0x36e6d6(0x7b)]('shareLink');_0x19c834[_0x36e6d6(0x9c)]=_0xadd2fa,_0x19c834[_0x36e6d6(0xa7)]=shortenLink(_0xadd2fa,maxLength),_0x19c834[_0x36e6d6(0xdf)]=_0xadd2fa,_0x19c834[_0x36e6d6(0x84)][_0x36e6d6(0xcb)]=_0x36e6d6(0xce);}),qrBtn[_0x274c65(0xe4)](_0x274c65(0x8a),async()=>{const _0x274046=_0x274c65;if(!shareLinkEl[_0x274046(0x9c)]||_0x274046(0xd5)===shareLinkEl[_0x274046(0x84)][_0x274046(0xcb)])return void alert(_0x274046(0x8f));const _0x4e03af=shareLinkEl[_0x274046(0x9c)];heartFrame['style'][_0x274046(0xcb)]=_0x274046(0x12a),await drawHeartAndQRCode(_0x4e03af);});const width=canvas[_0x274c65(0x113)],height=canvas[_0x274c65(0xa6)],heartPathStr='M23.6,0c-3.4,0-6.3,2.7-7.6,5.2C14.7,2.7,11.8,0,8.4,0C3.8,0,0,3.8,0,8.4\x20c0,9.4,16,21.2,16,21.2s16-11.8,16-21.2C32,3.8,28.2,0,23.6,0z',scale=0x8,heartWidth=0x20,heartHeight=29.6,heartCenterX=0x10,heartCenterY=0xe,centerX=width/0x2,centerY=height/0x2,qrSize=0x64;function _0x4867(_0x388f81,_0x1e2425){const _0x25a65f=_0x25a6();return _0x4867=function(_0x486700,_0x176b3b){_0x486700=_0x486700-0x79;let _0x4142a8=_0x25a65f[_0x486700];return _0x4142a8;},_0x4867(_0x388f81,_0x1e2425);}async function drawHeartAndQRCode(_0x2a6320){const _0x197ca0=_0x274c65;ctx[_0x197ca0(0xa0)](0x0,0x0,width,height);const _0x3a62d0=new Image();_0x3a62d0[_0x197ca0(0xaa)]='./assets/heart1.png',await new Promise((_0x3e8cb,_0x1e2e1e)=>{const _0x4d3f5e=_0x197ca0;_0x3a62d0['onload']=_0x3e8cb,_0x3a62d0[_0x4d3f5e(0x104)]=_0x1e2e1e;});const _0x589811=centerX-0x80,_0x1d0354=centerY-0x76;ctx[_0x197ca0(0xe5)](_0x3a62d0,_0x589811,_0x1d0354,0x100,0xec);try{const _0x15e0a5=document[_0x197ca0(0xab)](_0x197ca0(0x11f));_0x15e0a5[_0x197ca0(0x113)]=qrSize,_0x15e0a5[_0x197ca0(0xa6)]=qrSize,await QRCode['toCanvas'](_0x15e0a5,_0x2a6320,{'width':qrSize,'margin':0x1,'color':{'dark':'#ff7094','light':_0x197ca0(0xc5)}});const _0x285d51=centerX-qrSize/0x2,_0x24acc0=centerY-qrSize/0x2;ctx[_0x197ca0(0xe5)](_0x15e0a5,_0x285d51,_0x24acc0,qrSize,qrSize);}catch(_0x3f1f85){console[_0x197ca0(0x93)]('Lỗi\x20tạo\x20QR\x20code:',_0x3f1f85);}}canvas['addEventListener'](_0x274c65(0x8a),()=>{const _0x56cceb=_0x274c65;canvas[_0x56cceb(0xd6)](function(_0x1698cf){const _0x22d5a3=_0x56cceb,_0x31da95=document[_0x22d5a3(0xab)]('a');_0x31da95['download']='heart_qrcode.png';const _0x455461=URL[_0x22d5a3(0xed)](_0x1698cf);_0x31da95['href']=_0x455461,document[_0x22d5a3(0x123)][_0x22d5a3(0x107)](_0x31da95),_0x31da95[_0x22d5a3(0x8a)](),document[_0x22d5a3(0x123)][_0x22d5a3(0xba)](_0x31da95),URL['revokeObjectURL'](_0x455461);},_0x56cceb(0xf9));const _0x252359=canvas['toDataURL'](_0x56cceb(0xf9));document[_0x56cceb(0x7b)](_0x56cceb(0x12c))[_0x56cceb(0xaa)]=_0x252359,document[_0x56cceb(0x7b)](_0x56cceb(0x12c))[_0x56cceb(0x84)][_0x56cceb(0xcb)]=_0x56cceb(0x12a);});
